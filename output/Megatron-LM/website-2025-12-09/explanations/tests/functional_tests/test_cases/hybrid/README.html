<h1>tests/functional_tests/test_cases/hybrid</h1>
<p>这是一个非常清晰的层级。我们不需要再钻进每个房间去看了，现在我们要站在走廊上，看看这个<strong>“Hybrid 专区”</strong>整体是干什么的。</p>
<p>以下是针对 <code>tests/functional_tests/test_cases/hybrid/</code> 目录的通俗解读：</p>
<h3>1. 当前这个文件夹主要负责什么功能？</h3>
<p><strong>一句话总结：它是“新型混合动力车（Hybrid Model）”的专属测试大厅。</strong></p>
<ul>
<li><strong>什么是 Hybrid？</strong> 在 AI 领域，这通常指把<strong>传统的 Transformer 架构</strong>（就像燃油引擎）和<strong>新型的 Mamba/SSM 架构</strong>（就像电动机）拼在一起用的“混血儿”模型。</li>
<li><strong>功能：</strong> 这个文件夹专门用来存放针对这种<strong>“混血”模型</strong>的各种测试方案。因为这种模型结构比较特殊、比较新，容易出 Bug，所以需要单独开辟一个区域来集中测试。</li>
</ul>
<h3>2. 这个文件夹下的各个“直接文件”分别是干什么的？</h3>
<p><strong>观察结果：</strong>
在这个目录下，<strong>没有直接文件</strong>（没有 <code>.py</code> 或 <code>.yaml</code> 散落在根目录下）。</p>
<p><strong>这意味着什么？</strong>
这个文件夹纯粹是一个<strong>“分类容器”</strong>。
*   它就像是一个<strong>走廊</strong>，走廊本身不放东西，它的作用只是为了连接通向各个具体的“考场”（子文件夹）。
*   如果有直接文件，通常是通用的配置文件，但这里没有，说明每个测试用例都是独立的。</p>
<h3>3. 子文件夹的作用是什么？（概括）</h3>
<p>这些子文件夹（如 <code>hybrid_dynamic_inference...</code>, <code>hybrid_mr_mcore...</code>）就是一个个<strong>具体的“专项考场”</strong>。</p>
<p>虽然名字很长，但它们其实可以分为几类：</p>
<ol>
<li>
<p><strong>写作能力测试 (Inference)</strong>：</p>
<ul>
<li>比如 <code>hybrid_dynamic_inference...</code> 和 <code>hybrid_static_inference...</code>。</li>
<li><strong>作用</strong>：测试这种混血模型能不能正常说话、写字，以及开启“加速模式”（CUDA Graphs）后会不会翻车。</li>
</ul>
</li>
<li>
<p><strong>多卡协作测试 (Parallelism)</strong>：</p>
<ul>
<li>比如 <code>hybrid_mr_mcore...tp2_pp1...</code>。</li>
<li><strong>作用</strong>：测试当把这个混血模型拆成好几块，分给不同的显卡（TP/PP）去跑时，它们能不能配合默契，不掉链子。</li>
</ul>
</li>
<li>
<p><strong>不同硬件环境测试</strong>：</p>
<ul>
<li>名字里带 <code>dgx_a100</code> 或 <code>h100</code>。</li>
<li><strong>作用</strong>：确保模型在上一代显卡（A100）和最新一代显卡（H100）上都能跑通。</li>
</ul>
</li>
</ol>
<h3>4. 给我一个高层的认知，让我能快速理解这部分代码的作用</h3>
<p>你可以把这个文件夹看作是汽车工厂里的 <strong>“新能源与混合动力研发测试中心”</strong>。</p>
<ul>
<li><strong>背景</strong>：工厂的主流产品是纯燃油车（标准的 Transformer 模型），那一套测试流程已经很成熟了。</li>
<li><strong>挑战</strong>：现在工厂搞创新，推出了“油电混合”（Mamba + Transformer）的新架构。这种新架构结构复杂，以前的测试标准不一定适用。</li>
<li><strong>这个文件夹的作用</strong>：
    它是为了<strong>隔离风险</strong>和<strong>专项攻坚</strong>而设立的。
    它把所有关于“混合架构”的难题集中在这里解决。无论你是要测“混合引擎的加速性能”，还是测“混合引擎的四驱系统（多卡并行）”，都去这个大厅里找对应的房间。</li>
</ul>
<p><strong>总结：只要你看到 <code>hybrid</code> 这个词，就知道这里面的测试全都是为了伺候那些“架构长得比较花哨”的新型 AI 模型的。</strong></p>